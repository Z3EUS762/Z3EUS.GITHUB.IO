<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bem-vindo</title>
    <link rel="stylesheet" href="styles2.css"> <!-- Inclui o arquivo styles.css -->
</head>
<body>
    <!-- Barra superior azul -->
    <div class="barra-superior">
        <div id="infoUsuario"></div>
        <div>
            <span id="dataHora"></span> <!-- Adiciona span para exibir a data e hora -->
            <button id="btnSair">Sair</button> <!-- Botão "Sair" -->
        </div>
    </div>

    <script>
        // Aguarda o carregamento da página
        window.onload = function() {
            // Carrega o arquivo JSON dos usuários
            fetch('usuarios.json')
            .then(response => response.json())
            .then(data => {
                // Obtém o usuário logado
                var usuarioLogado = obterUsuarioLogadoDaURL(data.usuarios);
                if (usuarioLogado) {
                    // Determina a saudação correta com base no sexo do usuário
                    var saudacao = usuarioLogado.sexo === "F" ? "Bem-vinda" : "Bem-vindo";
                    // Exibe a mensagem de boas-vindas com o nome do usuário logado e a saudação adequada
                    document.getElementById("infoUsuario").innerText = saudacao + ", " + usuarioLogado.nome;
                    
                    // Adiciona evento de clique ao botão "Sair"
                    document.getElementById("btnSair").addEventListener("click", function() {
                        // Redireciona para a página index.html
                        window.location.href = "index.html";
                    });
                } 
            });

            // Função para exibir a data e hora atual
            setInterval(function() {
                var dataHoraAtual = new Date();
                var dataHoraFormatada = dataHoraAtual.toLocaleString();
                document.getElementById("dataHora").innerText = dataHoraFormatada;
            }, 1000);
        };

        // Função para obter o usuário logado a partir dos parâmetros da URL
        function obterUsuarioLogadoDaURL(usuarios) {
            var urlParams = new URLSearchParams(window.location.search);
            var usuarioLogado = urlParams.get('usuario');
            if (usuarioLogado) {
                // Procura pelo usuário logado na lista de usuários
                return usuarios.find(user => user.username === usuarioLogado);
            }
            return null;
        }
    </script>
</body>
</html>
